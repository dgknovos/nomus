function Search(){this.execQuery=function(b){if(b.searchText.value.replace(/^\s+|\s+$/g,"")==""){return false}var e=b.searchText.value;var d=encodeURIComponent(e);var g=location.href;var g="/php/search.php?st="+d;var f="en";if(typeof(b.lg)=="undefined"||b.lg.value==""){var c=Util.getAttrFromLocation("lg");if(c){f=c}}else{f=b.lg.value}g+="&lg="+f;g=g.replace(/%20/gi,"+");var a=g.length-1;if(g[a]=="&"||g[a]=="?"||g[a]=="#"){g=g.substring(0,a)}$(".searchBox").autocomplete("disable");location.href=g;return false};this.setSearchText=function(a){var e=new RegExp("st=([^&]+)","gi");var d=e.exec(a);if(d){var c=d[1];c=c.replace(/\+/gi," ");c=decodeURIComponent(c);var b=document.getElementById("searchText");b.setAttribute("value",c)}};this.setSearchText(location.href);$(".searchBox").autocomplete({source:"/php/autosuggest.php",minLength:2,delay:300,focus:function(a,b){return false},open:function(b,d){var a=$('<div class="autocompleteclose">'+Lang.lookup("close")+"</div>").appendTo($(this).parent());var c=$(this);a.click(function(){c.autocomplete("close")})},close:function(a,b){$(this).parent().find(".autocompleteclose").remove()}});$(document).ready(function(){$(".searchBox").get(0).focus()})}var search=null;$(document).ready(function(){search=new Search();$("#searchText").parent("form").submit(function(){return search.execQuery(this)});$("#search").click(function(){$(this).parent("form").get(0).lg.value="en";return true});$("#recherche").click(function(){$(this).parent("form").get(0).lg.value="fr";return true})});